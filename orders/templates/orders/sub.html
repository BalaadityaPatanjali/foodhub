{% extends 'orders/header.html' %}
{% load static %} 

{% block content %}
<!-- Enhanced Subs Page with Dark Theme Support & Pizza-Style Cards -->
<div class="subs-page" style="padding-top: 100px; min-height: 100vh; transition: all 0.3s ease;">
    <!-- Hero Section -->
    <section class="hero" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; text-align: center; padding: 4rem 2rem; margin-bottom: 3rem; position: relative; overflow: hidden;">
        <div class="hero-bg" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.1; background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><rect x=\"20\" y=\"40\" width=\"60\" height=\"20\" rx=\"10\" fill=\"none\" stroke=\"white\" stroke-width=\"2\"/><circle cx=\"30\" cy=\"30\" r=\"5\" fill=\"white\" opacity=\"0.5\"/><circle cx=\"70\" cy=\"30\" r=\"5\" fill=\"white\" opacity=\"0.5\"/><circle cx=\"30\" cy=\"70\" r=\"5\" fill=\"white\" opacity=\"0.5\"/><circle cx=\"70\" cy=\"70\" r=\"5\" fill=\"white\" opacity=\"0.5\"/></svg></div>
        <div style="position: relative; z-index: 1;">
            <h1 style="font-size: 3.5rem; margin-bottom: 1rem; font-weight: 800; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">🥪 Artisan Sub Selection 🥪</h1>
            <p style="font-size: 1.3rem; margin-bottom: 2rem; opacity: 0.95; max-width: 600px; margin-left: auto; margin-right: auto; line-height: 1.6;">Freshly baked bread with premium meats, crisp vegetables, and gourmet toppings</p>
            <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 25px; backdrop-filter: blur(10px);">
                <i class="fas fa-bread-slice" style="color: #ffd700;"></i>
                <span style="font-weight: 600;">Fresh Baked Daily • Premium Ingredients</span>
            </div>
        </div>
    </section>

    <!-- Subs Menu Section -->
    <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 2rem;">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h2 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; color: var(--text-primary, #1e293b);">Our Sub Menu</h2>
            <p style="font-size: 1.1rem; color: var(--text-secondary, #64748b); max-width: 500px; margin: 0 auto;">Choose from our selection of gourmet subs, available in small and large sizes</p>
        </div>

        <!-- Subs Grid -->
        <div class="subs-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 2rem; margin-bottom: 3rem;">
            {% for dish in dishes %}
            <div class="sub-card" style="background: var(--card-bg, white); border-radius: 20px; overflow: hidden; box-shadow: 0 8px 25px var(--shadow-color, rgba(0, 0, 0, 0.1)); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; border: 2px solid var(--border-color, transparent);">
                <div class="sub-image" style="width: 100%; height: 220px; position: relative; overflow: hidden;">
                    {% if dish.sub_filling == "Cheese" %}
  <img src="https://media.istockphoto.com/id/171587071/photo/foot-long-roast-beef-and-cheese-sub.jpg?s=2048x2048&w=is&k=20&c=Ak6uEh_VEhlRzlsmlBFs8h65vLuoKNO5FANeSmN3ySE=" alt="Cheese Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Italian" %}
  <img src="https://cdn.pixabay.com/photo/2023/04/02/21/38/sandwich-7895477_1280.jpg" alt="Italian Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Meatball" %}
  <img src="https://cdn.pixabay.com/photo/2016/08/09/11/17/sandwich-1580334_1280.jpg" alt="Meatball Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Tuna" %}
  <img src="https://cdn.pixabay.com/photo/2016/08/09/11/24/sandwich-1580348_1280.jpg" alt="Tuna Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Turkey & Swiss" %}
  <img src="https://cdn.pixabay.com/photo/2020/06/06/05/31/juicy-sandwich-5265292_1280.jpg" alt="Turkey Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% else %}
  <img src="https://cdn.pixabay.com/photo/2016/11/18/15/07/sandwich-1831726_1280.jpg" alt="{{ dish.sub_filling }}" style="width: 100%; height: 100%; object-fit: cover;">
{% endif %}
                    <div class="image-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, rgba(245, 158, 11, 0.85), rgba(217, 119, 6, 0.7)); opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center;">
                        <div style="color: white; text-align: center;">
                            <i class="fas fa-sandwich" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <p style="font-weight: 600; margin: 0;">Artisan Style</p>
                        </div>
                    </div>
                    <div style="position: absolute; top: 1rem; left: 1rem; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">Premium</div>
                    <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); color: #f59e0b; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">🥖 Fresh</div>
                </div>
                <div style="padding: 1.5rem;">
                    <h3 style="font-size: 1.4rem; font-weight: 700; color: var(--text-primary, #1e293b); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        {{ dish.sub_filling }}
                        <span style="font-size: 1rem;">🥪</span>
                    </h3>
                    <p style="color: var(--text-secondary, #64748b); margin-bottom: 1.5rem; line-height: 1.6; font-size: 0.95rem;">{{ dish.description|default:"Fresh ingredients on artisan bread with premium toppings" }}</p>
                    <div style="display: flex; gap: 1rem;">
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Small</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Small Sub - {{ dish.sub_filling }}", {{ dish.small_price }})'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">${{ dish.small_price }}</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Large</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Large Sub - {{ dish.sub_filling }}", {{ dish.large_price }})'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">${{ dish.large_price }}</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <!-- Static subs (fallback) -->
            <div class="sub-card" style="background: var(--card-bg, white); border-radius: 20px; overflow: hidden; box-shadow: 0 8px 25px var(--shadow-color, rgba(0, 0, 0, 0.1)); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; border: 2px solid var(--border-color, transparent);">
                <div class="sub-image" style="width: 100%; height: 220px; position: relative; overflow: hidden;">
                    {% if dish.sub_filling == "Cheese" %}
  <img src="https://media.istockphoto.com/id/171587071/photo/foot-long-roast-beef-and-cheese-sub.jpg?s=2048x2048&w=is&k=20&c=Ak6uEh_VEhlRzlsmlBFs8h65vLuoKNO5FANeSmN3ySE=" alt="Cheese Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Italian" %}
  <img src="https://cdn.pixabay.com/photo/2023/04/02/21/38/sandwich-7895477_1280.jpg" alt="Italian Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Meatball" %}
  <img src="https://cdn.pixabay.com/photo/2016/08/09/11/17/sandwich-1580334_1280.jpg" alt="Meatball Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Tuna" %}
  <img src="https://cdn.pixabay.com/photo/2016/08/09/11/24/sandwich-1580348_1280.jpg" alt="Tuna Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Turkey & Swiss" %}
  <img src="https://cdn.pixabay.com/photo/2020/06/06/05/31/juicy-sandwich-5265292_1280.jpg" alt="Turkey Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% else %}
  <img src="https://cdn.pixabay.com/photo/2016/11/18/15/07/sandwich-1831726_1280.jpg" alt="{{ dish.sub_filling }}" style="width: 100%; height: 100%; object-fit: cover;">
{% endif %}
                    <div class="image-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, rgba(245, 158, 11, 0.85), rgba(217, 119, 6, 0.7)); opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center;">
                        <div style="color: white; text-align: center;">
                            <i class="fas fa-sandwich" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <p style="font-weight: 600; margin: 0;">Classic Style</p>
                        </div>
                    </div>
                    <div style="position: absolute; top: 1rem; left: 1rem; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">Popular</div>
                    <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); color: #f59e0b; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">⭐ Classic</div>
                </div>
                <div style="padding: 1.5rem;">
                    <h3 style="font-size: 1.4rem; font-weight: 700; color: var(--text-primary, #1e293b); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        Italian
                        <span style="font-size: 1rem;">🥪</span>
                    </h3>
                    <p style="color: var(--text-secondary, #64748b); margin-bottom: 1.5rem; line-height: 1.6; font-size: 0.95rem;">Ham, salami, provolone cheese, lettuce, tomato, and Italian dressing</p>
                    <div style="display: flex; gap: 1rem;">
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Small</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Small Sub - Italian", 8.95)'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">$8.95</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Large</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Large Sub - Italian", 12.95)'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">$12.95</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sub-card" style="background: var(--card-bg, white); border-radius: 20px; overflow: hidden; box-shadow: 0 8px 25px var(--shadow-color, rgba(0, 0, 0, 0.1)); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; border: 2px solid var(--border-color, transparent);">
                <div class="sub-image" style="width: 100%; height: 220px; position: relative; overflow: hidden;">
                    <div class="image-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, rgba(245, 158, 11, 0.85), rgba(217, 119, 6, 0.7)); opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center;">
                        <div style="color: white; text-align: center;">
                            <i class="fas fa-sandwich" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <p style="font-weight: 600; margin: 0;">Healthy Choice</p>
                        </div>
                    </div>
                    <div style="position: absolute; top: 1rem; left: 1rem; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">Healthy</div>
                    <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); color: #10b981; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">🥬 Light</div>
                </div>
                <div style="padding: 1.5rem;">
                    <h3 style="font-size: 1.4rem; font-weight: 700; color: var(--text-primary, #1e293b); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        Turkey & Swiss
                        <span style="font-size: 1rem;">🥪</span>
                    </h3>
                    <p style="color: var(--text-secondary, #64748b); margin-bottom: 1.5rem; line-height: 1.6; font-size: 0.95rem;">Roasted turkey breast, swiss cheese, lettuce, tomato, and mayo</p>
                    <div style="display: flex; gap: 1rem;">
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Small</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Small Sub - Turkey & Swiss", 7.95)'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">$7.95</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Large</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Large Sub - Turkey & Swiss", 11.95)'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">$11.95</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sub-card" style="background: var(--card-bg, white); border-radius: 20px; overflow: hidden; box-shadow: 0 8px 25px var(--shadow-color, rgba(0, 0, 0, 0.1)); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; border: 2px solid var(--border-color, transparent);">
                <div class="sub-image" style="width: 100%; height: 220px; position: relative; overflow: hidden;">
                    {% if dish.sub_filling == "Cheese" %}
  <img src="https://media.istockphoto.com/id/171587071/photo/foot-long-roast-beef-and-cheese-sub.jpg?s=2048x2048&w=is&k=20&c=Ak6uEh_VEhlRzlsmlBFs8h65vLuoKNO5FANeSmN3ySE=" alt="Cheese Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Italian" %}
  <img src="https://cdn.pixabay.com/photo/2023/04/02/21/38/sandwich-7895477_1280.jpg" alt="Italian Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Meatball" %}
  <img src="https://cdn.pixabay.com/photo/2016/08/09/11/17/sandwich-1580334_1280.jpg" alt="Meatball Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Tuna" %}
  <img src="https://cdn.pixabay.com/photo/2016/08/09/11/24/sandwich-1580348_1280.jpg" alt="Tuna Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% elif dish.sub_filling == "Turkey & Swiss" %}
  <img src="https://cdn.pixabay.com/photo/2020/06/06/05/31/juicy-sandwich-5265292_1280.jpg" alt="Turkey Sub" style="width: 100%; height: 100%; object-fit: cover;">
{% else %}
  <img src="https://cdn.pixabay.com/photo/2016/11/18/15/07/sandwich-1831726_1280.jpg" alt="{{ dish.sub_filling }}" style="width: 100%; height: 100%; object-fit: cover;">
{% endif %}
                    <div class="image-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, rgba(245, 158, 11, 0.85), rgba(217, 119, 6, 0.7)); opacity: 0; transition: opacity 0.3s ease; display: flex; align-items: center; justify-content: center;">
                        <div style="color: white; text-align: center;">
                            <i class="fas fa-sandwich" style="font-size: 2rem; margin-bottom: 0.5rem;"></i>
                            <p style="font-weight: 600; margin: 0;">Hearty Choice</p>
                        </div>
                    </div>
                    <div style="position: absolute; top: 1rem; left: 1rem; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">Hot</div>
                    <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); color: #ef4444; padding: 0.3rem 0.6rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700;">🔥 Hearty</div>
                </div>
                <div style="padding: 1.5rem;">
                    <h3 style="font-size: 1.4rem; font-weight: 700; color: var(--text-primary, #1e293b); margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                        Meatball
                        <span style="font-size: 1rem;">🥪</span>
                    </h3>
                    <p style="color: var(--text-secondary, #64748b); margin-bottom: 1.5rem; line-height: 1.6; font-size: 0.95rem;">Homemade meatballs, marinara sauce, and melted mozzarella cheese</p>
                    <div style="display: flex; gap: 1rem;">
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Small</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Small Sub - Meatball", 9.95)'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">$9.95</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                        <div style="flex: 1; text-align: center;">
                            <span style="display: block; font-size: 0.8rem; color: var(--text-secondary, #64748b); margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Large</span>
                            <button type="button" class="sub-btn"
                                    onclick='addSubToCart("Large Sub - Meatball", 13.95)'
                                    style="width: 100%; padding: 0.8rem 1.2rem; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); position: relative; overflow: hidden;">
                                <span style="position: relative; z-index: 1;">$13.95</span>
                                <div class="btn-shine" style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease;"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Success Notification Toast -->
<div id="sub-toast" style="position: fixed; top: 120px; right: 20px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 1.2rem 1.8rem; border-radius: 16px; box-shadow: 0 12px 30px rgba(245, 158, 11, 0.4); z-index: 10001; transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); display: flex; align-items: center; gap: 0.8rem; border: 1px solid rgba(255,255,255,0.2);">
    <i class="fas fa-check-circle" style="font-size: 1.2rem;"></i>
    <span id="sub-message" style="font-weight: 600; font-size: 1rem;">Sub added to cart!</span>
</div>

<!-- Enhanced Dark Theme CSS Variables & Styles -->
<style>
/* Light Mode (Default) */
:root {
    --bg-primary: #f8fafc;
    --card-bg: white;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --border-color: #e2e8f0;
    --shadow-color: rgba(0, 0, 0, 0.1);
}

/* Dark Mode */
.dark-mode {
    --bg-primary: #0f172a;
    --card-bg: #1e293b;
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --border-color: #334155;
    --shadow-color: rgba(0, 0, 0, 0.3);
}

/* Apply background color to page */
.subs-page {
    background: var(--bg-primary) !important;
}

/* Enhanced card hover effects */
.sub-card:hover {
    transform: translateY(-12px) scale(1.02);
    box-shadow: 0 20px 40px var(--shadow-color);
    border-color: rgba(245, 158, 11, 0.3);
}

.sub-card:hover .image-overlay {
    opacity: 1;
}

.sub-card:hover img {
    transform: scale(1.1);
}

/* Button hover effects */
.sub-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
}

.sub-btn:hover .btn-shine {
    left: 100%;
}

.sub-btn:active {
    transform: translateY(-1px);
}

/* Responsive design */
@media (max-width: 768px) {
    .subs-page { 
        padding-top: 80px; 
    }
    
    .hero h1 { 
        font-size: 2.5rem; 
    }
    
    .subs-grid { 
        grid-template-columns: 1fr; 
        padding: 0 1rem; 
    }
    
    .container { 
        padding: 2rem 1rem; 
    }
    
    .sub-card {
        margin-bottom: 1rem;
    }
    
    .sub-card > div:last-child > div:last-child { 
        flex-direction: column; 
        gap: 0.75rem; 
    }
}

@media (max-width: 480px) {
    .hero h1 {
        font-size: 2rem;
    }
    
    .hero p {
        font-size: 1rem;
    }
    
    .subs-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .sub-card {
        margin-bottom: 1rem;
    }
}
</style>

<script>
// Working Cart Functions for Subs (Following Pasta Pattern)
function addSubToCart(description, price) {
    try {
        console.log('Adding sub to cart:', description, price);
        
        // Get existing cart
        let cart = JSON.parse(localStorage.getItem('cart') || '[]');
        
        // Create cart item
        const cartItem = {
            item_description: description,
            price: parseFloat(price),
            quantity: 1,
            category: 'sub'
        };
        
        // Check if item already exists
        const existingIndex = cart.findIndex(existing => 
            existing.item_description === cartItem.item_description
        );
        
        if (existingIndex !== -1) {
            // Update quantity if item exists
            cart[existingIndex].quantity = (cart[existingIndex].quantity || 1) + 1;
            showSubNotification(`Quantity updated for ${description}!`);
        } else {
            // Add new item
            cart.push(cartItem);
            showSubNotification(`${description} added to cart!`);
        }
        
        // Save cart and update count
        localStorage.setItem('cart', JSON.stringify(cart));
        updateSubCartCount();
        
        // Visual feedback on button
        const clickedButton = event.target;
        const originalText = clickedButton.textContent;
        clickedButton.textContent = 'Added!';
        clickedButton.style.background = '#10ac84';
        
        setTimeout(() => {
            clickedButton.textContent = originalText;
            clickedButton.style.background = '';
        }, 1000);
        
        console.log('✅ Sub successfully added to cart');
        
    } catch (error) {
        console.error('❌ Error adding sub to cart:', error);
        showSubNotification('Error adding sub to cart', 'error');
    }
}

function updateSubCartCount() {
    try {
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
        
        // Update all cart count elements
        const selectors = ['.cart-badge', '.cart-count', '#cart-count', '.mobile-cart-count'];
        selectors.forEach(selector => {
            const elements = document.querySelectorAll(selector);
            elements.forEach(element => {
                if (element) {
                    element.textContent = totalItems;
                    if (totalItems > 0) {
                        element.style.display = 'inline-flex';
                    } else {
                        element.style.display = 'none';
                    }
                }
            });
        });
        
        console.log(`Cart count updated: ${totalItems} items`);
    } catch (error) {
        console.error('Error updating cart count:', error);
    }
}

function showSubNotification(message, type = 'success') {
    const toast = document.getElementById('sub-toast');
    const messageEl = document.getElementById('sub-message');
    
    if (toast && messageEl) {
        messageEl.textContent = message;
        
        // Set color based on type
        if (type === 'error') {
            toast.style.background = '#ef4444';
            toast.querySelector('i').className = 'fas fa-exclamation-circle';
        } else {
            toast.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
            toast.querySelector('i').className = 'fas fa-check-circle';
        }
        
        // Show notification
        toast.style.transform = 'translateX(0)';
        
        // Hide after 3 seconds
        setTimeout(() => {
            toast.style.transform = 'translateX(100%)';
        }, 3000);
    }
}

// Initialize cart count on page load
document.addEventListener('DOMContentLoaded', function() {
    updateSubCartCount();
    console.log('🥪 Subs page loaded with working cart functions');
});

// Update cart count on storage changes (for cross-tab updates)
window.addEventListener('storage', function(e) {
    if (e.key === 'cart') {
        updateSubCartCount();
    }
});
</script>

<!-- Load your existing base.js for compatibility -->
<script src="{% static 'orders/js/base.js' %}"></script>

{% endblock %}