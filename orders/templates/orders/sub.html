{% extends 'orders/header.html' %}
{% load static %} 
{% block content %}
<script src="{% static 'orders/js/base.js' %}"></script>

<div class="container">
  <h4 style="margin:10px; text-align:center;"> Choose one of the Subs ðŸ¥ª </h4>

  <div class="row justify-content-center">
    <table class="table" style="border: 2px solid black">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Sub Filling</th>
          <th scope="col">Small</th>
          <th scope="col">Large</th>
        </tr>
      </thead>
      <tbody>
        {% for dish in dishes %}
        <tr>
          <th>{{ dish.sub_filling }}</th>
          <td>
            <button type="button" class="btn btn-primary" onclick='add_to_cart({"item_description": "Small Sub - {{ dish.sub_filling }}", "price": {{ dish.small_price }}, "image_url": "{% static "orders/sub.jpg" %}"})'><strong>{{ dish.small_price }}</strong></button>
          </td>
          <td>
            <button type="button" class="btn btn-success" onclick='add_to_cart({"item_description": "Large Sub - {{ dish.sub_filling }}", "price": {{ dish.large_price }}, "image_url": "{% static "orders/sub.jpg" %}"})'><strong>{{ dish.large_price }}</strong></button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<script>
// Initialize dark mode for this specific page
document.addEventListener('DOMContentLoaded', function() {
    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-mode');
        document.documentElement.classList.add('dark-mode');
    }
    
    // Listen for theme changes
    document.addEventListener('themeChanged', function(e) {
        if (e.detail.theme === 'dark') {
            document.body.classList.add('dark-mode');
            document.documentElement.classList.add('dark-mode');
        } else {
            document.body.classList.remove('dark-mode');
            document.documentElement.classList.remove('dark-mode');
        }
    });
    
    // Listen for cross-tab changes
    window.addEventListener('storage', function(e) {
        if (e.key === 'theme') {
            if (e.newValue === 'dark') {
                document.body.classList.add('dark-mode');
                document.documentElement.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
                document.documentElement.classList.remove('dark-mode');
            }
        }
    });
});
</script>

{% endblock %}
